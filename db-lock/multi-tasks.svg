<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="599" height="657"><desc>title%20Multiple%20Tasks%0A%0ATask1-%3ELockDb%3ARequest%20lock%3A%20new%20lock%20entry%5Cn(id%3A%20lock_id1%2C%20status%3A%20ACTIVE)%0ATask2-%3ELockDb%3ARequest%20lock%3A%20new%20lock%20entry%5Cn(id%3A%20lock_id2%2C%20status%3A%20ACTIVE)%0ATask1-%3ELockDb%3ACheck%20ACTIVE%20locks%0ATask1%3C--LockDb%3AReturn%20other%20lock%20ids%5Cn(Race%20Condition)%0ATask1-%3ELockDb%3ACancel%20lock%3A%20update%20lock%5Cn(status%3A%20ABORTED)%0Anote%20over%20Task1%3A%20Back%20off%5Cn(random%20duration)%0Anote%20over%20Task2%3A%20...%0Anote%20over%20Task1%3A%20Retry</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="599" height="657"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="230.45171976004815" y="24.50280495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Multiple Tasks</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 89.03688627 95.887643371 L 89.03688627 657.818636891" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 321.5974284033333 95.887643371 L 321.5974284033333 657.818636891" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 554.1579705366667 95.887643371 L 554.1579705366667 657.818636891" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 52.31319068949999 51.782594461 L 125.7605818505 51.782594461 L 125.7605818505 95.887643371 L 52.31319068949999 95.887643371 L 52.31319068949999 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="70.03688627" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Task1</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 278.8737328228333 51.782594461 L 364.32112398383333 51.782594461 L 364.32112398383333 95.887643371 L 278.8737328228333 95.887643371 L 278.8737328228333 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="296.5974284033333" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">LockDb</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 517.4342749561666 51.782594461 L 590.8816661171667 51.782594461 L 590.8816661171667 95.887643371 L 517.4342749561666 95.887643371 L 517.4342749561666 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="535.1579705366667" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Task2</text></g></g><g><g><g><rect fill="white" stroke="none" x="108.36687684166664" y="128.55804997099997" width="190.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="108.36687684166664" y="144.89325327099996" width="193.90056099" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="110.81715733666664" y="143.25973294099998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Request lock: new lock entry</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="110.81715733666664" y="159.59493624099997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(id: lock_id1, status: ACTIVE)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 89.03688627 166.12901756099998 L 308.14811101966666 166.12901756099998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(321.5974284033333,166.12901756099998) translate(-321.5974284033333,-166.12901756099998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 307.98475898666663 159.32268285266665 L 321.5974284033333 166.12901756099998 L 307.98475898666663 172.93535226933332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="340.92741897499997" y="190.63182251099997" width="190.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="340.92741897499997" y="206.96702581099996" width="193.90056099" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="343.37769947" y="205.33350548099995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Request lock: new lock entry</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="343.37769947" y="221.66870878099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(id: lock_id2, status: ACTIVE)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 554.1579705366667 228.20279010099998 L 335.04674578699996 228.20279010099998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(321.5974284033333,228.20279010099998) translate(-321.5974284033333,-228.20279010099998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 335.21009782 221.39645539266664 L 321.5974284033333 228.20279010099998 L 335.21009782 235.00912480933331 Z"/></g></g><g><g><rect fill="white" stroke="none" x="135.36687684166665" y="252.70559505099996" width="139.90056099" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="137.81715733666664" y="267.40727802099997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Check ACTIVE locks</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 89.03688627 273.94135934099995 L 308.14811101966666 273.94135934099995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(321.5974284033333,273.94135934099995) translate(-321.5974284033333,-273.94135934099995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 307.98475898666663 267.1350246326666 L 321.5974284033333 273.94135934099995 L 307.98475898666663 280.7476940493333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="135.86687684166665" y="298.44416429099994" width="138.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="135.86687684166665" y="314.7793675909999" width="114.90056099" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="138.31715733666664" y="313.1458472609999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Return other lock ids</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="138.31715733666664" y="329.4810505609999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(Race Condition)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 321.5974284033333 336.01513188099995 L 102.48620365366666 336.01513188099995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(89.03688627,336.01513188099995) translate(-89.03688627,-336.01513188099995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 102.64955568666666 329.2087971726666 L 89.03688627 336.01513188099995 L 102.64955568666666 342.8214665893333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="123.86687684166664" y="360.51793683099993" width="162.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="123.86687684166664" y="376.8531401309999" width="134.90056099" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="126.31715733666664" y="375.2196198009999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Cancel lock: update lock</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="126.31715733666664" y="391.5548231009999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(status: ABORTED)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 89.03688627 398.08890442099994 L 308.14811101966666 398.08890442099994" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(321.5974284033333,398.08890442099994) translate(-321.5974284033333,-398.08890442099994)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 307.98475898666663 391.2825697126666 L 321.5974284033333 398.08890442099994 L 307.98475898666663 404.8952391293333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.16760165 422.5917093709999 L 155.20448792 422.5917093709999 L 169.90617089 437.2933923409999 L 169.90617089 476.4978802609999 L 8.16760165 476.4978802609999 L 8.16760165 422.5917093709999 M 155.20448792 422.5917093709999 L 155.20448792 437.2933923409999 L 169.90617089 437.2933923409999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="31.036886269999997" y="445.4609939909999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Back off</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="31.036886269999997" y="461.7961972909999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(random duration)</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 525.2886859166667 501.0006852109999 L 568.3255721866668 501.0006852109999 L 583.0272551566668 515.7023681809999 L 583.0272551566668 538.5716528009999 L 525.2886859166667 538.5716528009999 L 525.2886859166667 501.0006852109999 M 568.3255721866668 501.0006852109999 L 568.3255721866668 515.7023681809999 L 583.0272551566668 515.7023681809999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="548.1579705366667" y="523.8699698309999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">...</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 48.667601649999995 563.074457751 L 114.70448791999999 563.074457751 L 129.40617089 577.7761407209999 L 129.40617089 600.645425341 L 48.667601649999995 600.645425341 L 48.667601649999995 563.074457751 M 114.70448791999999 563.074457751 L 114.70448791999999 577.7761407209999 L 129.40617089 577.7761407209999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="71.53688627" y="585.943742371" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Retry</text></g></g><g/><g/><g/></g></svg>